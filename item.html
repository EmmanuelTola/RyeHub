<!DOCTYPE html>
<head>
<meta property="og:image" content="https://ryehub.vercel.app/banner.jpg" />
<link rel="shortcut icon" type="image/jpg" href="https://ryehub.vercel.app/logo.jpg">
<meta data-react-helmet="true" name="description" content="Get the best products with easy shopping online. Connect with sellers and customers and enjoy great deal on RyeHub"/>
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="RyeHub">
<meta property="twitter:description" content="Get the best products with easy shopping online. Connect with sellers and customers and enjoy great deal on RyeHub">
<meta property="twitter:image" content="https://ryehub.vercel.app/logo.jpg">	
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta property="og:type" content="website"/>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display" rel="stylesheet">

 <title>RyeHub</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HexxeJS/HexxeDB@main/hex.css">
<script src="https://cdn.jsdelivr.net/gh/HexxeJS/HexxeDB@latest/hex.js"></script>
<script src="https://cdn.jsdelivr.net/gh/HexxeJS/HexxeDB/que.js"></script>
<script src="https://cdn.jsdelivr.net/gh/HexxeJS/HexxeDB/query.js"></script>
</head>

<body>

<style>
 
html, body {
margin: 0;
}

.custom-spin {
  animation-duration: 1s; /* Change the duration to adjust the speed */
}    

#addup {
font-family: 'Ubuntu'; 
}    
#addup .put {
background: white; 
border: 1px #FEAF0B solid; 
width: 70px; 
height: 35px; 
border-radius: 5px; 
font-size: 25px; 
}

#addup .dis {
background: #fafafa; 
border: grey 1px solid; 
width: 50px; 
height: 50px; 
border-radius: 50%; 
font-size: 25px; 
}

.active {
border: 2px solid green; 
}

hr {
border: none; 
height: 1px; 
background: #0B1919; 
}



  
</style>
<div id="nav"></div>
<div height="65px"></div>

 
 
<center>
<i margin="10px top" id="ploader" size="50px" class="fas fa-circle-notch fa-spin custom-spin"></i></center>
  
<div id="prod">
<query call="document.getElementById('ploader').hide(); setPop()" data="ryehub">
<data id="purco"></data>

<empty><in opacity="0.5" font="Rubik" margin="10px left" size="16px">You have not created any product</in></empty>

<result>

<array style="display: flex; overflow: scroll" class="noscroll" elem="p">
<p style="text-decoration: underline" margin="10px right" onclick="goRow(this)" font="Kanit" size="15px">{ tags }</p>
</array>

<div id="produp" flex style="overflow: scroll; flex-shrink: 0;" margin="2% left" left> 
<img style="object-fit: cover" frame id="ppm" ratio="1/1" src="$xqlfile${ pic }" width="200px">
&nbsp;
<img style="object-fit: cover" frame id="ppm" ratio="1/1" src="$xqlfile${ pictwo }" width="200px">
&nbsp; 
<img style="object-fit: cover" frame id="ppm" ratio="1/1" src="$xqlfile${ picthree }" width="200px">
</div>
<div width="95%" margin="2.5% left">
<p margin="8px bottom" font="Poppins" size="23px">{ name }!!if[[stock > 0]][[ <in size="12px" padding="3px" back="#D1FFBD">in stock</in> ]]else[[ <in size="16px" padding="3px" back="#e05555">out of stock</in> ]]!!</p> 
<div bold size="15px" font="Playfair Display" id="rates">
!!if[[rate == 1]][[
<span class="stam filled" data-value="1">&#9733;</span>
<span class="stam" data-value="2">&#9733;</span>
<span class="stam" data-value="3">&#9733;</span>
<span class="stam" data-value="4">&#9733;</span>
<span class="stam" data-value="5">&#9733;</span>
&nbsp; 1/5 
]]!!

!!if[[rate == 2]][[
<span class="stam filled" data-value="1">&#9733;</span>
<span class="stam filled" data-value="2">&#9733;</span>
<span class="stam" data-value="3">&#9733;</span>
<span class="stam" data-value="4">&#9733;</span>
<span class="stam" data-value="5">&#9733;</span>
&nbsp; 2/5 
]]!!

 !!if[[rate == 3]][[
<span class="stam filled" data-value="1">&#9733;</span>
<span class="stam filled" data-value="2">&#9733;</span>
<span class="stam filled" data-value="3">&#9733;</span>
<span class="stam" data-value="4">&#9733;</span>
<span class="stam" data-value="5">&#9733;</span>
&nbsp; 3/5 
]]!!
 
!!if[[rate == 4]][[
<span class="stam filled" data-value="1">&#9733;</span>
<span class="stam filled" data-value="2">&#9733;</span>
<span class="stam filled" data-value="3">&#9733;</span>
<span class="stam filled" data-value="4">&#9733;</span>
<span class="stam" data-value="5">&#9733;</span>
&nbsp; 4/5 
]]!!

!!if[[rate == 5]][[
<span class="stam filled" data-value="1">&#9733;</span>
<span class="stam filled" data-value="2">&#9733;</span>
<span class="stam filled" data-value="3">&#9733;</span>
<span class="stam filled" data-value="4">&#9733;</span>
<span class="stam filled" data-value="5">&#9733;</span>
&nbsp; 5/5 
]]!!
</div>
{ currency }!!if[[discount > 0]][[<in bold size="30px">{ discount }</in> <s size="20px" color="red">{ price }</s><in display="none">]]!!<in bold size="30px">{ price }</in>
</in>
 <br>
<button margin="8px,0,10px,0" onclick="location.href = 'seller.html?id={ userid }';" theme="smart" blend="normal" back="white" border="1px solid #1ec778"  color="black" size="16px">CONTACT SELLER</button>
<br>
<drop name="Product Description">
<p font="Outfit" size="14px">{ bio }</p>
</div>
</drop>
!!if[[delivery == Physical]][[ 
<div flex margin="10px left" size="16px" font="Outfit"><p>Shipping To: <in bold font="Ubuntu" color="green">{ location }</in></p></div>
<hr>
]]!!
<center> 
<input id="specval" hidden>
<div style="white-space: nowrap; overflow: scroll;">
<array elem="button"><button onclick="specTo(this)" margin="0,5px,10px,5px" class="spec" blend="normal" theme="smart" back="#edf5f2" size="15px">{ size }</button></array>
</div>
</center>
    



 
<div margin="5px top" center id="addup">
<button class="put" onclick="addUp('{ id }', '-', '{ stock }')">-</button>
&nbsp; 
<button class="dis" id="add{ id }">1</button>
&nbsp;
<button class="put" onclick="addUp('{ id }', '+', '{ stock }')">+</button>

</div> 
   
       


!!if[[stock > 0]][[
<button margin="12px top" color="white" onclick="addCart('{ id }')" page-middle-h back="#072617" theme="smart" blend="normal" radius="3px" size="22px">ADD TO CART</button>
]]!!
    

<p margin="15px,0,5px,0" bold font="Poppins" size="20px">&nbsp; SIMILAR PRODUCTS</p>
<div id="similar" flex style="overflow: scroll;" width="95%" margin="2.5% left">
<div width="95%" margin="2.5% left" flex>
<div margin="10px right" class="block"></div>
<div class="block"></div>
</div>
 
</div>

<div center>
<p size="22px" font="Kanit">Rate this product:</p>
<div class="stars" id="stars">
  <span class="star" data-value="1">&#9733;</span>
  <span class="star" data-value="2">&#9733;</span>
  <span class="star" data-value="3">&#9733;</span>
  <span class="star" data-value="4">&#9733;</span>
  <span class="star" data-value="5">&#9733;</span>
</div>
<div size="15px" font="Playfair Display" id="rating">Your rating: <span id="ratingValue">0</span>/5</div>
</div>

<input hidden id="currstar" value="{ rate }">

</result>
</query>
</div>
 
<button style="top: 50%; left: 50%; transform: translate(-50%, -50%);" width="200px" display="none" blend="normal" color="white" fixed index="999999999999999999" back="rgba(0,0,0,0.7)" id="added" theme="smart" size="18px">Added To Cart</button>
<button style="top: 50%; left: 50%; transform: translate(-50%, -50%);" width="200px" display="none" blend="normal" color="white" fixed index="999999999999999999" back="rgba(0,0,0,0.7)" id="removed" theme="smart" size="18px">Removed From Cart</button>
<button style="top: 50%; left: 50%; transform: translate(-50%, -50%);" width="200px" display="none" blend="normal" color="white" fixed index="999999999999999999" back="rgba(0,0,0,0.7)" id="rated" theme="smart" size="18px">Product Rated</button>
 
 <script parse="getMen();">

$IMPORT('@UI');    
document.getElementById('nav').Xporter('nav.hex');
const $con = "q2goAPe9YRLIWeWI75Iw"; 
const $db = "ryehub"; 
const pid = $GET('id'); 
let $prod = []; 
let query = `SELECT products WHERE id = '${pid}'`; 
document.getElementById('purco').innerText = query; 
$START('XQL:'+$con);
function doRate(){
const stars = document.querySelectorAll('.star');
const ratingValue = document.getElementById('ratingValue');
const item = $GET('id'); 
let rated =  localStorage.getItem('rate-'+item);  
if(checkData(rated)){
rated = Number(rated); 
ratingValue.textContent = rated;
 highlightStars(rated); 
}
stars.forEach(star => {
  star.addEventListener('click', () => {
    let value = parseFloat(star.getAttribute('data-value'));
    ratingValue.textContent = value;
    localStorage.setItem('rate-'+item, value); 
   highlightStars(value);
  if(checkData(rated)){ 
  value = Number(rated) + Number(value); 
   value = value/2; 
  } 
    updateStar(value); 
  
  });
});
}

function highlightStars(value) {
 const stars = document.querySelectorAll('.star');
 stars.forEach(star => {
    const starValue = parseFloat(star.getAttribute('data-value'));
    if (starValue <= value) {
      star.classList.add('filled');
    } else {
      star.classList.remove('filled');
    }
  });
} 

 function updateStar(value) {
 try{
 let curs = document.getElementById('currstar').value; 
 let iden = $GET('id'); 
 let val = value; 
 if(curs > 0){
 val = val + Number(curs) + Number(curs); 
 val =  val/3; 
 }
 val = Math.round(val); 
 $UPDATE($db, `UPDATE products SET rate = '${val}' WHERE id = '${iden}'`, 'PopTell("#rated")'); 

 } catch(error) {
  alert(error); 
 }
 }
 
  
  
  
function doSimilar() {
doRate(); 
$QUERY($con, $db, 'SELECT products').pull(setSimilar); 
}

function setSimilar(prod) {
try{
let data = prod; 
let curr = $GET('id'); 
curr = data.filter(item => item['id'] == curr); 
if(curr && curr[0]) {
curr = curr[0];
data = data.filter(item => item !== curr); 
let tags = curr.tags; 
tags = tags.split("&comma;"); 
for (let i = tags.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [tags[i], tags[j]] = [tags[j], tags[i]];
}
let one = tags[0];
let two = tags[1];
// alert(one + "," + two);
data = data.filter(item => item['tags'].includes(one) || item['tags'].includes(two)); 
if(data && data[0]){
data = $shuffle(data); 
if (data.length > 4) {
    data = data.slice(0, 4);
}
let allhtml = ""; 
data.forEach(function(row) {
let id = row.id; 
let pic = xqlfile + row.pic; 
let name = row.name; 
let price = row.price; 
let ori = price; 
let currency = row.currency; 
if(checkData(row.discount)) {
price = row.discount; 
}
html = `<div onclick="location.href = 'item.html?id=${id}'" border="1px solid #0B1919" style="width: calc(47vw - 12px); margin-bottom: 10px; max-width: 200px;" margin="10px right">
<img style="object-fit: cover" ratio="1/1" src="${pic}" width="100%">
<div margin="2.5% left" width="95%">
<p style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 99%"  margin="5px bottom" font="Kanit" size="17.5">${name}</p>
${currency}<in bold size="20px">${price}</in> <s size="16px" color="red">${ori}</s>
</div>
<br>
</div>
`; 
allhtml = allhtml + html; 
});
document.getElementById('similar').innerHTML = allhtml; 
rootHex(); 
} else {
document.getElementById('similar').innerHTML = `<p font="Outfit" opacity="0.7" size="15px">No Similar Product Found</p>`; 
rootHex(); 
}
}
doViews(); 
} catch(error) {
alert(error.stack);
}}

function doViews() {
let curr = $GET('id'); 
$UPDATE($db, `UPDATE products SET views = 'views ++ 1' WHERE id = '${curr}'`, 'doHistory()'); 
}

function doHistory() {
let curr = $GET('id'); 
let day = $date(); 
let mine = localStorage.getItem('rye'); 
if(mine == null) { mine = "Visitor"; }
$INSERT($db, `INSERT history FIELDS(userid, item, day) VALUES(${mine}, ${curr}, ${day})`, 'console.log("Updated visit")'); 
}
  
 
 

  
function specTo(elem){


let spet = document.querySelectorAll('.active'); 
if(spet){
spet.forEach(function(row){
row.classList.remove('active');   
}); 
}

elem.classList.add("active"); 
document.getElementById('specval').value = elem.innerText;
}

  
function addUp(targ, typeh, max){
let target = "add"+targ; 
target = document.getElementById(target); 
let curr = Number(target.innerText); 
if(typeh == "+") {
curr = curr + 1; 
if(curr > max) {
curr = max;    
}  
} 

if(typeh == "-") {
curr = curr - 1; 
if(curr < 0) {
curr = 0;    
}  
} 

target.innerText = curr; 


   
}



function addCart(rid){
let qty = document.getElementById('add'+rid); 
if(qty){
qty = qty.innerText;     
} else {
qty = 1; 
} 
let code = "rye-"+rid; 
let spec = "spec-"+rid;
if(qty > 0){
let siz = document.getElementById('specval').value; 
 
localStorage.setItem(code, qty); 
localStorage.setItem(spec, siz); 
setCart(); 
} else {
localStorage.removeItem(code); 
localStorage.removeItem(spec);  
setCart('none');    
}



}



function setCart(typeh) {
let tot = 0; 
const keys = Object.keys(localStorage);
keys.forEach(key => {
if (key.startsWith("rye-")) {
let value = localStorage.getItem(key);
value = Number(value); 
tot = tot + value; 
} }); 
document.getElementById('cartnum').innerText = tot; 
if(typeh == "none") {
PopTell('#removed');      
} else {
PopTell('#added');  
} 
}

function goRow(elem) {
location.href = "row.html?tag="+elem.innerText;
}


function doArray(){
let arr = document.querySelectorAll('array'); 
if(arr){
arr.forEach(function(row){
let disp = row.getAttribute("style"); 
let rowid = row.id; 
let rowclass = row.getAttribute("class");
let elem = row.getAttribute("elem"); 
let targ = row.querySelector(elem); 
let body = document.createElement("div"); 
if(checkData(disp)){
body.setAttribute("style", disp);}
if(checkData(rowid)){
body.id = rowid;}
if(checkData(rowclass)){ 
body.setAttribute("class", rowclass); }
 
let val = targ.innerHTML; 
if(checkData(val)) {
val = val.split(","); 
val.forEach(function(dot){
let ins = targ.cloneNode(true); 
ins.innerHTML = dot; 
body.appendChild(ins); 
}); 

row.parentElement.replaceChild(body, row);
} else {
row.remove();
}
});     
}
}


function doProdesc() {
let arr = document.querySelectorAll('.prodesc'); 
if(arr){
arr.forEach(function(row){ 
let html = row.innerHTML;
let drop = document.createElement("drop"); 
drop.setAttribute("name", "Product Description"); 
drop.innerHTML = html;
row.parentElement.replaceChild(drop, row); 
});    
   rootHex(); 
   }
}

let curr = localStorage.getItem('rye'); 

function setPop(){
let popes = document.querySelectorAll('[pope]'); 
if(popes) {
popes.forEach(function(pope){
let pop = pope.getAttribute('pope'); 
pope.setAttribute("pop", pop);   
    
}); 
rootHex();

doArray(); 

doSimilar(); 


 
let elem = document.querySelectorAll('img');
 elem.forEach(function(img){
img.onerror = function() {

if(this.id == "ppm") {
this.hide(); 
 this.remove();  
 
}
 }
 });



}
}



</script>
</body>

  
